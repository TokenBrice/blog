{{- if and .IsPage (ne .Type "glossary") -}}
{{- $image := partialCached "helper/image" (dict "Context" . "Type" "opengraph") .RelPermalink "opengraph" -}}
{{- $desc := .Description | default (.Summary | plainify) -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{ .Title | safeJS }}",
  "description": "{{ $desc | safeJS }}",
  "author": {
    "@type": "Person",
    "name": "{{ .Site.Title | safeJS }}",
    "url": "{{ .Site.BaseURL }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ .Site.Title | safeJS }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ absURL "/img/main/emblem-color-square-150.png" }}"
    }
  },
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
  {{- if not .Lastmod.IsZero }}
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
  {{- end }}
  "url": "{{ .Permalink }}",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  },
  {{- if $image.exists }}
  "image": {
    "@type": "ImageObject",
    "url": "{{ absURL $image.permalink }}"
  },
  {{- end }}
  "keywords": {{ with .Params.tags }}{{ if reflect.IsSlice . }}{{ . | jsonify | safeJS }}{{ else }}{{ slice . | jsonify | safeJS }}{{ end }}{{ else }}[]{{ end }},
  "articleSection": {{ with .Params.categories }}{{ if reflect.IsSlice . }}{{ . | jsonify | safeJS }}{{ else }}{{ slice . | jsonify | safeJS }}{{ end }}{{ else }}[]{{ end }},
  "inLanguage": "{{ .Language.Lang }}"
}
</script>
{{- else if .IsHome -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "{{ .Site.Title | safeJS }}",
  "url": "{{ .Site.BaseURL }}",
  "description": "{{ .Site.Params.sidebar.subtitle | default .Site.Params.description | safeJS }}",
  "inLanguage": "{{ .Language.Lang }}",
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": "{{ .Site.BaseURL }}/search/?q={search_term_string}"
    },
    "query-input": "required name=search_term_string"
  }
}
</script>
{{- end -}}
